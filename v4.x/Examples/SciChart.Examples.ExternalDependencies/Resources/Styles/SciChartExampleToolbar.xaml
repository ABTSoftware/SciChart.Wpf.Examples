<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:common="clr-namespace:SciChart.Examples.ExternalDependencies.Common"
                    xmlns:converters="clr-namespace:SciChart.Examples.ExternalDependencies.Controls.SciChartInteractionToolbar.Converters"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:extension="clr-namespace:SciChart.Examples.ExternalDependencies.Controls.SciChartInteractionToolbar.Extension"
                    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    xmlns:s="http://schemas.abtsoftware.co.uk/scichart"
                    xmlns:toolbar="clr-namespace:SciChart.Examples.ExternalDependencies.Controls.SciChartInteractionToolbar"
                    xmlns:toolbar3D="clr-namespace:SciChart.Examples.ExternalDependencies.Controls.SciChart3DInteractionToolbar"
                    xmlns:tooltip3D="clr-namespace:SciChart.Charting3D.Modifiers.Tooltip3D;assembly=SciChart.Charting3D"
                    mc:Ignorable="d">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="ToolBarButtonsCommon.xaml" />
        <ResourceDictionary Source="AnnotationStylesResourceDictionary.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <common:BoolToValueConverter x:Key="BoolToVisibilityConverter"
                                 FalseValue="Collapsed"
                                 TrueValue="Visible" />

    <common:BoolToValueConverter x:Key="BoolSwitchVisibilityConverter"
                                 FalseValue="Visible"
                                 TrueValue="Collapsed" />

    <converters:StringToAnnotationTypeConverter x:Key="AnnotationTypeConverter" />
    <converters:EnumValueToStringConverter x:Key="SelectedEnumValueConverter" />

    <DataTemplate x:Key="Orbit3DModifierTemplate">

        <ToggleButton HorizontalAlignment="Left"
                      Content="Zoom"
                      IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                      Style="{StaticResource ZoomButtonStyle}"
                      ToolTipService.ToolTip="Toggle OrbitModifier"
                      s:ToggleButtonExtensions.GroupName="ZoomPanSelection3DGroup" />
    </DataTemplate>

    <DataTemplate x:Key="FreeZoom3DModifierTemplate">

        <common:FlyoutMenuToggleButton HorizontalAlignment="Left"
                                       Content="Pan"
                                       IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                                       Style="{StaticResource PanToggleButtonStyle}"
                                       ToolTipService.ToolTip="Free Zoom Modifier"
                                       s:ToggleButtonExtensions.GroupName="ZoomPanSelection3DGroup">

            <common:FlyoutMenuToggleButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">

                    <TextBlock Text="Execute on" />
                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:ExecuteOn}}}" SelectedItem="{Binding Modifier.ExecuteOn, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                </StackPanel>
            </common:FlyoutMenuToggleButton.PopupContent>
        </common:FlyoutMenuToggleButton>

    </DataTemplate>

    <DataTemplate x:Key="TooltipModifier3DTemplate">
        <StackPanel Orientation="Vertical">
            <common:FlyoutMenuToggleButton HorizontalAlignment="Left"
                                           ContentTemplate="{StaticResource TooltipIconContentTemplate}"
                                           IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                                           Style="{StaticResource FlyoutMenuToggleButtonStyle}"
                                           ToolTipService.ToolTip="ToolTip Modifier">

                <common:FlyoutMenuToggleButton.PopupContent>
                    <StackPanel MinWidth="150" Orientation="Vertical">
                        <TextBlock Text="ToolTip mode" />
                        <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:SourceMode}}}" SelectedItem="{Binding Modifier.SourceMode, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />
                        <common:FlyoutSeparator />
                        <TextBlock Text="Show tooltip mode" />
                        <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:ShowTooltipOptions}}}" SelectedItem="{Binding Modifier.ShowTooltipOn, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />
                        <common:FlyoutSeparator />
                        <TextBlock Text="Crosshair mode" />
                        <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type tooltip3D:CrosshairMode}}}" SelectedItem="{Binding Modifier.CrosshairMode, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />
                    </StackPanel>
                </common:FlyoutMenuToggleButton.PopupContent>
            </common:FlyoutMenuToggleButton>
            <common:FlyoutSeparator />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="ZoomExtents3DModifierTemplate">

        <Button HorizontalAlignment="Left"
                Command="{Binding Modifier.ZoomExtentsCommand}"
                Content="Zoom Extents"
                Style="{StaticResource ZoomExtentsButtonStyle}"
                ToolTipService.ToolTip="Zoom to Extents" />

    </DataTemplate>

    <DataTemplate x:Key="VertexSelectionModifier3DTemplate">

        <common:FlyoutMenuToggleButton HorizontalAlignment="Left"
                                       Content="SLCT"
                                       Padding="0"
                                       FontSize="11"
                                       IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                                       Style="{StaticResource FlyoutMenuToggleButtonStyle}"
                                       ToolTipService.ToolTip="Selection Modifier"
                                       s:ToggleButtonExtensions.GroupName="ZoomPanSelection3DGroup">

            <common:FlyoutMenuToggleButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">

                    <TextBlock FontSize="12" Text="Execute on" />
                    <ComboBox FontSize="12" ItemsSource="{Binding Source={extension:EnumValues {x:Type s:ExecuteOn}}}" SelectedItem="{Binding Modifier.ExecuteOn, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <TextBlock FontSize="12" Text="Execute when" />
                    <ComboBox FontSize="12" ItemsSource="{Binding Source={extension:EnumValues {x:Type s:MouseModifier}}}" SelectedItem="{Binding Modifier.ExecuteWhen, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                </StackPanel>
            </common:FlyoutMenuToggleButton.PopupContent>
        </common:FlyoutMenuToggleButton>
    </DataTemplate>

    <DataTemplate x:Key="MouseWheelModifier3DTemplate">

        <common:FlyoutMenuButton HorizontalAlignment="Left"
                                 Content="Wheel"
                                 Style="{StaticResource MouseWheelButtonStyle}"
                                 ToolTipService.ToolTip="Mouse Wheel Modifier">
            <common:FlyoutMenuButton.PopupContent>
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="MouseWheel Sensitivity" />
                    <Slider Width="200"
                            Margin="3"
                            HorizontalAlignment="Left"
                            Maximum="40"
                            Minimum="1"
                            Orientation="Horizontal"
                            Value="{Binding Modifier.MouseWheelSensitivity, Mode=TwoWay}" />
                </StackPanel>
            </common:FlyoutMenuButton.PopupContent>
        </common:FlyoutMenuButton>
    </DataTemplate>

    <DataTemplate x:Key="LegendModifier3DTemplate">

        <common:FlyoutMenuButton x:Name="legentFlyoutMenuButton"
                                 HorizontalAlignment="Left"
                                 Content="Leg"
                                 Style="{StaticResource FlyoutMenuButtonStyle}"
                                 ToolTipService.ToolTip="Legend Modifier">

            <common:FlyoutMenuButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">
                    <TextBlock Text="Legend source" />

                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:SourceMode}}}" SelectedItem="{Binding Modifier.SourceMode, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <TextBlock Text="Legend placement" />

                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:LegendPlacement}}}" SelectedItem="{Binding Modifier.LegendPlacement, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <TextBlock Text="Legend orientation" />

                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type Orientation}}}" SelectedItem="{Binding Modifier.Orientation, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <CheckBox Margin="3"
                              VerticalAlignment="Center"
                              Content="Show legend"
                              IsChecked="{Binding Modifier.ShowLegend, Mode=TwoWay}" />

                    <CheckBox Margin="3"
                              VerticalAlignment="Center"
                              Content="Show checkboxes"
                              IsChecked="{Binding Modifier.ShowVisibilityCheckboxes, Mode=TwoWay}" />

                    <CheckBox Margin="3"
                              VerticalAlignment="Center"
                              Content="Show series markers"
                              IsChecked="{Binding Modifier.ShowSeriesMarkers, Mode=TwoWay}" />

                </StackPanel>
            </common:FlyoutMenuButton.PopupContent>
        </common:FlyoutMenuButton>

    </DataTemplate>

    <DataTemplate x:Key="EmptyDataTemplate"/>

    <!--  SciChart3DToolbar  -->
    <Style x:Key="SciChartExampleToolbar3DStyle" TargetType="toolbar3D:SciChart3DInteractionToolbar">
        <Setter Property="IsDeveloperMode" Value="{Binding Source={x:Static common:DeveloperModManager.Manage}, Path=IsDeveloperMode}" />
        <Setter Property="Panel.ZIndex" Value="9999" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="toolbar3D:SciChart3DInteractionToolbar">

                    <Border Background="#FF232426"
                            BorderBrush="#323539"
                            BorderThickness="0,0,2,0">

                        <WrapPanel x:Name="PART_Container"
                                   HorizontalAlignment="Left"
                                   Orientation="Vertical">

                            <ItemsControl x:Name="PART_ItemsControl"
                                          HorizontalAlignment="Left"
                                          VerticalAlignment="Stretch"
                                          ItemsSource="{TemplateBinding ModifiersSource}">

                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel HorizontalAlignment="Left" Orientation="Vertical" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>

                                <ItemsControl.ItemTemplateSelector>
                                    <toolbar3D:SciChart3DModifierButtonTemplateSelector CustomZoomExtentsModifier3DTemplate="{StaticResource ZoomExtents3DModifierTemplate}"
                                                                                        FreeLookModifierTemplate="{StaticResource FreeZoom3DModifierTemplate}"
                                                                                        LegendModifier3DTemplate="{StaticResource LegendModifier3DTemplate}"
                                                                                        MouseWheel3DModifierTemplate="{StaticResource MouseWheelModifier3DTemplate}"
                                                                                        OrbitModifierTemplate="{StaticResource Orbit3DModifierTemplate}"
                                                                                        TooltipModifier3DTemplate="{StaticResource TooltipModifier3DTemplate}"
                                                                                        VertexSelectionModifier3DTemplate="{StaticResource VertexSelectionModifier3DTemplate}"
                                                                                        EmptyTemplate="{StaticResource EmptyDataTemplate}"/>
                                </ItemsControl.ItemTemplateSelector>

                            </ItemsControl>
                        </WrapPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style BasedOn="{StaticResource SciChartExampleToolbar3DStyle}" TargetType="toolbar3D:SciChart3DInteractionToolbar" />

    <DataTemplate x:Key="PointMarkersTemplate">
        <StackPanel Orientation="Vertical">

            <ToggleButton Name="SelectionToggleButton"
                          HorizontalAlignment="Left"
                          Content="Select PointMarkers"
                          IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                          Style="{StaticResource PointerButtonStyle}"
                          ToolTipService.ToolTip="Select PointMarkers"
                          s:ToggleButtonExtensions.GroupName="ZoomPanSelectionGroup" />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="ZoomPanModifierModifierTemplate">

        <common:FlyoutMenuToggleButton HorizontalAlignment="Left"
                                       Content="Pan"
                                       IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                                       Style="{StaticResource PanToggleButtonStyle}"
                                       ToolTipService.ToolTip="Toggle Zoom-Pan"
                                       s:ToggleButtonExtensions.GroupName="ZoomPanSelectionGroup">

            <common:FlyoutMenuToggleButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">

                    <TextBlock Text="Direction" />

                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:XyDirection}}}" SelectedItem="{Binding Modifier.XyDirection, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                </StackPanel>
            </common:FlyoutMenuToggleButton.PopupContent>
        </common:FlyoutMenuToggleButton>

    </DataTemplate>

    <DataTemplate x:Key="SeriesSelectionModifierTemplate">

        <StackPanel Orientation="Vertical">

            <ToggleButton HorizontalAlignment="Left"
                          Content="Select Series"
                          Padding="0"
                          FontSize="11"
                          IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                          Style="{StaticResource PointerButtonStyle}"
                          ToolTipService.ToolTip="Select Series"
                          s:ToggleButtonExtensions.GroupName="ZoomPanSelectionGroup" />

            <common:FlyoutSeparator />
        </StackPanel>

    </DataTemplate>

    <DataTemplate x:Key="RubberBandXyZoomModifierTemplate">
        
            <ToggleButton HorizontalAlignment="Left"
                          Content="Zoom"
                          IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                          Style="{StaticResource ZoomButtonStyle}"
                          ToolTipService.ToolTip="Toggle Rubber-Band Zoom"
                          s:ToggleButtonExtensions.GroupName="ZoomPanSelectionGroup" />
        
    </DataTemplate>

    <DataTemplate x:Key="AnnotationCreationModifierTemplate">

        <StackPanel Orientation="Vertical">

            <common:FlyoutMenuButton HorizontalAlignment="Left"
                                     Content="Annotation"
                                     Style="{StaticResource AnnotationButtonStyle}"
                                     ToolTipService.ToolTip="Annotation">

                <common:FlyoutMenuButton.PopupContent>
                    <StackPanel MinWidth="150" Orientation="Vertical">

                        <TextBlock Text="Annotation Type" />

                        <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type converters:AnnotationType}}}" SelectedItem="{Binding Modifier.AnnotationType, Mode=TwoWay, Converter={StaticResource AnnotationTypeConverter}}" />

                        <Button Width="auto"
                                HorizontalAlignment="Stretch"
                                Command="{Binding Modifier.AddAnnotation}"
                                Content="Add Annotation"
                                Style="{StaticResource DefaultButtonStyle}" />

                        <common:FlyoutSeparator />

                        <Button Width="auto"
                                HorizontalAlignment="Stretch"
                                Command="{Binding Modifier.DeleteAnnotation}"
                                Content="Delete Selected"
                                Style="{StaticResource DefaultButtonStyle}" />

                    </StackPanel>
                </common:FlyoutMenuButton.PopupContent>
            </common:FlyoutMenuButton>

            <common:FlyoutSeparator />
        </StackPanel>

    </DataTemplate>

    <DataTemplate x:Key="MouseWheelZoomModifierTemplate">

        <common:FlyoutMenuButton HorizontalAlignment="Left"
                                 Content="Wheel"
                                 Style="{StaticResource MouseWheelButtonStyle}"
                                 ToolTipService.ToolTip="MouseWheel">

            <common:FlyoutMenuButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">
                    <TextBlock Text="Action Type" />

                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:ActionType}}}" SelectedItem="{Binding Modifier.ActionType, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <TextBlock Text="Direction" />

                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:XyDirection}}}" SelectedItem="{Binding Modifier.XyDirection, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                </StackPanel>
            </common:FlyoutMenuButton.PopupContent>
        </common:FlyoutMenuButton>

    </DataTemplate>

    <DataTemplate x:Key="CustomFlipModifierTemplate">

        <StackPanel Orientation="Vertical">

            <common:FlyoutMenuButton HorizontalAlignment="Left"
                                     Content="Flip"
                                     Padding="0"
                                     Style="{StaticResource FlyoutMenuButtonStyle}"
                                     ToolTipService.ToolTip="Flip">

                <common:FlyoutMenuButton.PopupContent>
                    <StackPanel MinWidth="150" Orientation="Vertical">
                        <TextBlock Text="Flip the X or Y axis" />
                        <common:FlyoutSeparator />

                        <Button Width="Auto"
                                HorizontalAlignment="Stretch"
                                Command="{Binding Modifier.FlipXAxis}"
                                Content="Flip the X-axis"
                                Style="{StaticResource DefaultButtonStyle}"
                                ToolTipService.ToolTip="X-axis" />

                        <Button Width="Auto"
                                HorizontalAlignment="Stretch"
                                Command="{Binding Modifier.FlipYAxis}"
                                Content="Flip the Y-axis"
                                Style="{StaticResource DefaultButtonStyle}"
                                ToolTipService.ToolTip="Y-axis" />

                    </StackPanel>
                </common:FlyoutMenuButton.PopupContent>
            </common:FlyoutMenuButton>

            <common:FlyoutSeparator />
        </StackPanel>

    </DataTemplate>

    <DataTemplate x:Key="CustomRotateChartModifierTemplate">

        <Button HorizontalAlignment="Left"
                Command="{Binding Modifier.RotateChartCommand}"
                Content="Rotate clockwise"
                Style="{StaticResource RotateChartButtonStyle}"
                ToolTipService.ToolTip="Rotate the Chart"
                Visibility="{Binding Modifier.IsEnabled, Converter={StaticResource BoolToVisibilityConverter}}" />

    </DataTemplate>

    <DataTemplate x:Key="CustomThemeModifierTemplate">

        <common:FlyoutMenuButton HorizontalAlignment="Left"
                                 Content="THM"
                                 Padding="0"
                                 FontSize="10"
                                 HorizontalContentAlignment="Center"
                                 Style="{StaticResource FlyoutMenuButtonStyle}"
                                 ToolTipService.ToolTip="Theme changing">

            <common:FlyoutMenuButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">
                    <TextBlock FontSize="12" Text="Update Theme" />
                    <common:FlyoutSeparator />

                    <ComboBox FontSize="12" ItemsSource="{Binding Source={x:Static s:ThemeManager.AllThemes}}" SelectedItem="{Binding Modifier.SelectedTheme, Mode=TwoWay}" />

                </StackPanel>
            </common:FlyoutMenuButton.PopupContent>
        </common:FlyoutMenuButton>


    </DataTemplate>

    <DataTemplate x:Key="CustomExportModifierTemplate">

        <common:FlyoutMenuButton HorizontalAlignment="Left"
                                 Content="EXP"
                                 Padding="0"
                                 FontSize="10"
                                 HorizontalContentAlignment="Center"
                                 Style="{StaticResource FlyoutMenuButtonStyle}"
                                 ToolTipService.ToolTip="Export to Png/XPS">

            <common:FlyoutMenuButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">
                    <TextBlock FontSize="12" Text="Export Options" />
                    <common:FlyoutSeparator />

                    <CheckBox Content="Use Xaml RS?" IsChecked="{Binding Modifier.UseXamlRs, Mode=OneWayToSource}" ToolTipService.ToolTip="When checked, use Xaml Render Surface on export"/>
                    <common:FlyoutSeparator />
                    
                    <Button Content="Save Png" Command="{Binding Modifier.SavePngCommand}" ToolTipService.ToolTip="Save this chart to PNG"/>
                    <Button Content="Save Png (Big)" Command="{Binding Modifier.SavePngBigCommand}" ToolTipService.ToolTip="Save this chart to Large PNG"/>

                    <Button Content="Save XPS" Command="{Binding Modifier.SaveXpsCommand}" ToolTipService.ToolTip="Save this chart to XPS"/>
                    <Button Content="Save XPS (Big)" Command="{Binding Modifier.SaveXpsBigCommand}" ToolTipService.ToolTip="Save this chart to Large XPS"/>
                    
                </StackPanel>
            </common:FlyoutMenuButton.PopupContent>
        </common:FlyoutMenuButton>


    </DataTemplate>

    <DataTemplate x:Key="RolloverModifierTemplate">

        <common:FlyoutMenuToggleButton x:Name="RollFlyoutMenuButton"
                                       HorizontalAlignment="Left"
                                       Content="ROLL"
                                       HorizontalContentAlignment="Center"
                                       IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                                       Style="{StaticResource FlyoutMenuToggleButtonStyle}"
                                       FontSize="10"
                                       Padding="0"
                                       ToolTipService.ToolTip="Rollover"
                                       s:ToggleButtonExtensions.GroupName="RollCursorTooltipSelectionGroup">

            <common:FlyoutMenuToggleButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">
                    <TextBlock FontSize="12" Text="Rollover mode" />

                    <ComboBox FontSize="12" ItemsSource="{Binding Source={extension:EnumValues {x:Type s:SourceMode}}}" SelectedItem="{Binding Modifier.SourceMode, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <TextBlock FontSize="12" Text="Show tooltip mode" />

                    <ComboBox FontSize="12" ItemsSource="{Binding Source={extension:EnumValues {x:Type s:ShowTooltipOptions}}}" SelectedItem="{Binding Modifier.ShowTooltipOn, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}, FallbackValue='MouseHover'}" />

                    <common:FlyoutSeparator />

                    <CheckBox Margin="3"
                              FontSize="12"
                              VerticalAlignment="Center"
                              Content="Show axis label"
                              IsChecked="{Binding Modifier.ShowAxisLabels, Mode=TwoWay}" />

                </StackPanel>
            </common:FlyoutMenuToggleButton.PopupContent>
        </common:FlyoutMenuToggleButton>

    </DataTemplate>

    <DataTemplate x:Key="TooltipModifierTemplate">

        <StackPanel Orientation="Vertical">

            <common:FlyoutMenuToggleButton HorizontalAlignment="Left"
                                           Content="ToolTip"
                                           ContentTemplate="{StaticResource TooltipIconContentTemplate}"
                                           IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                                           Style="{StaticResource FlyoutMenuToggleButtonStyle}"
                                           ToolTipService.ToolTip="ToolTip"
                                           s:ToggleButtonExtensions.GroupName="RollCursorTooltipSelectionGroup">

                <common:FlyoutMenuToggleButton.PopupContent>
                    <StackPanel MinWidth="150" Orientation="Vertical">
                        <TextBlock Text="ToolTip mode" />

                        <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:SourceMode}}}" SelectedItem="{Binding Modifier.SourceMode, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                        <common:FlyoutSeparator />

                        <TextBlock Text="Show tooltip mode" />

                        <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:ShowTooltipOptions}}}" SelectedItem="{Binding Modifier.ShowTooltipOn, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    </StackPanel>
                </common:FlyoutMenuToggleButton.PopupContent>
            </common:FlyoutMenuToggleButton>

            <common:FlyoutSeparator />
        </StackPanel>

    </DataTemplate>

    <DataTemplate x:Key="CursorModifierTemplate">

        <common:FlyoutMenuToggleButton HorizontalAlignment="Left"
                                       Content="CUR"
                                       HorizontalContentAlignment="Center"
                                       IsChecked="{Binding Modifier.IsEnabled, Mode=TwoWay}"
                                       Style="{StaticResource CursorButtonStyle}"
                                       FontSize="11"
                                       Padding="0"
                                       s:ToggleButtonExtensions.GroupName="RollCursorTooltipSelectionGroup">

            <common:FlyoutMenuToggleButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">
                    <StackPanel.Resources>
                        <common:SnappingModeToVisibilityConverter x:Key="SnappingModeToVisibilityConverter" />
                    </StackPanel.Resources>

                    <TextBlock FontSize="12" Text="Cursor mode" />

                    <ComboBox FontSize="12" ItemsSource="{Binding Source={extension:EnumValues {x:Type s:SourceMode}}}" SelectedItem="{Binding Modifier.SourceMode, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <TextBlock FontSize="12" Text="Show tooltip mode" />

                    <ComboBox FontSize="12" ItemsSource="{Binding Source={extension:EnumValues {x:Type s:ShowTooltipOptions}}}" SelectedItem="{Binding Modifier.ShowTooltipOn, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <TextBlock FontSize="12" Text="Snapping mode" />

                    <ComboBox x:Name="snappingModeCmbx"
                              FontSize="12"
                              ItemsSource="{Binding Source={extension:EnumValues {x:Type s:CursorSnappingMode}}}"
                              SelectedItem="{Binding Modifier.SnappingMode, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <StackPanel Orientation="Vertical" Visibility="{Binding SelectedItem, ElementName=snappingModeCmbx, Mode=OneWay, Converter={StaticResource SnappingModeToVisibilityConverter}}">
                        <TextBlock Text="Snap to" />

                        <ComboBox DisplayMemberPath="DataSeries.SeriesName"
                                  FontSize="12"
                                  ItemsSource="{Binding Modifier.ParentSurface.RenderableSeries}"
                                  SelectedIndex="0">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="SelectionChanged">
                                    <toolbar:InvokeSnapToSeriesCommandAction SnapToSelectedSeriesCommand="{Binding SnapToSeriesCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </ComboBox>

                        <common:FlyoutSeparator />
                    </StackPanel>

                    <CheckBox Margin="3"
                              FontSize="12"
                              VerticalAlignment="Center"
                              Content="Show axis label"
                              IsChecked="{Binding Modifier.ShowAxisLabels, Mode=TwoWay}" />

                </StackPanel>
            </common:FlyoutMenuToggleButton.PopupContent>
        </common:FlyoutMenuToggleButton>


    </DataTemplate>

    <DataTemplate x:Key="FlyoutSeparatorTemplate">

        <common:FlyoutSeparator />

    </DataTemplate>

    <DataTemplate x:Key="ZoomExtentsModifierTemplate">
        
        <StackPanel Orientation="Vertical">
            
            <Button HorizontalAlignment="Left"
                    Command="{Binding Modifier.ParentSurface.AnimateZoomExtentsCommand}"
                    Content="Zoom Extents"
                    Style="{StaticResource ZoomExtentsButtonStyle}"
                    ToolTipService.ToolTip="Zoom to Extents" />
            
            <common:FlyoutSeparator />
            
        </StackPanel>

    </DataTemplate>

    <DataTemplate x:Key="EmptyTemplate" />

    <DataTemplate x:Key="LegendModifier2DTemplate">

        <common:FlyoutMenuButton x:Name="legentFlyoutMenuButton"
                                 HorizontalAlignment="Left"
                                 Content="Leg"
                                 Style="{StaticResource FlyoutMenuButtonStyle}"
                                 ToolTipService.ToolTip="Legend">

            <common:FlyoutMenuButton.PopupContent>
                <StackPanel MinWidth="150" Orientation="Vertical">
                    <TextBlock Text="Legend source" />

                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:SourceMode}}}" SelectedItem="{Binding Modifier.GetLegendDataFor, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <TextBlock Text="Legend placement" />

                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type s:LegendPlacement}}}" SelectedItem="{Binding Modifier.LegendPlacement, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <TextBlock Text="Legend orientation" />

                    <ComboBox ItemsSource="{Binding Source={extension:EnumValues {x:Type Orientation}}}" SelectedItem="{Binding Modifier.Orientation, Mode=TwoWay, Converter={StaticResource SelectedEnumValueConverter}}" />

                    <common:FlyoutSeparator />

                    <CheckBox Margin="3"
                              VerticalAlignment="Center"
                              Content="Show legend"
                              IsChecked="{Binding Modifier.ShowLegend, Mode=TwoWay}" />

                    <CheckBox Margin="3"
                              VerticalAlignment="Center"
                              Content="Show checkboxes"
                              IsChecked="{Binding Modifier.ShowVisibilityCheckboxes, Mode=TwoWay}" />

                    <CheckBox Margin="3"
                              VerticalAlignment="Center"
                              Content="Show series markers"
                              IsChecked="{Binding Modifier.ShowSeriesMarkers, Mode=TwoWay}" />

                </StackPanel>
            </common:FlyoutMenuButton.PopupContent>
        </common:FlyoutMenuButton>

    </DataTemplate>

    <!--  SciChartToolbar  -->
    <Style x:Key="SciChartExampleToolbarStyle" TargetType="toolbar:SciChartInteractionToolbar">
        <Setter Property="Panel.ZIndex" Value="9999" />
        <Setter Property="IsDeveloperMode" Value="{Binding Source={x:Static common:DeveloperModManager.Manage}, Path=IsDeveloperMode}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="toolbar:SciChartInteractionToolbar">
                    <Border Background="#FF232426"
                            BorderBrush="#323539"
                            BorderThickness="0,0,2,0">

                        <WrapPanel x:Name="PART_Container"
                                   HorizontalAlignment="Left"
                                   Orientation="Vertical">

                            <ItemsControl x:Name="PART_ItemsControl"
                                          HorizontalAlignment="Left"
                                          VerticalAlignment="Stretch"
                                          ItemsSource="{TemplateBinding ModifiersSource}">

                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel HorizontalAlignment="Left" Orientation="Vertical" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>

                                <ItemsControl.ItemTemplateSelector>
                                    <toolbar:ModifierButtonTemplateSelector AnnotationCreationModifierTemplate="{StaticResource AnnotationCreationModifierTemplate}"
                                                                            CursorModifierTemplate="{StaticResource CursorModifierTemplate}"
                                                                            EmptyTemplate="{StaticResource EmptyTemplate}"
                                                                            FlipModifierTemplate="{StaticResource CustomFlipModifierTemplate}"
                                                                            FlyoutSeparatorTemplate="{StaticResource FlyoutSeparatorTemplate}"
                                                                            LegendModifierTemplate="{StaticResource LegendModifier2DTemplate}"
                                                                            MouseWheelZoomModifierTemplate="{StaticResource MouseWheelZoomModifierTemplate}"
                                                                            PointMarkersModifierTemplate="{StaticResource PointMarkersTemplate}"
                                                                            ExportModifierTemplate="{StaticResource CustomExportModifierTemplate}"
                                                                            RolloverModifierTemplate="{StaticResource RolloverModifierTemplate}"
                                                                            RotateChartModifierTemplate="{StaticResource CustomRotateChartModifierTemplate}"
                                                                            RubberBandXyZoomModifierTemplate="{StaticResource RubberBandXyZoomModifierTemplate}"
                                                                            SeriesSelectionModifierTemplate="{StaticResource SeriesSelectionModifierTemplate}"
                                                                            ThemeModifierTemplate="{StaticResource CustomThemeModifierTemplate}"
                                                                            TooltipModifierTemplate="{StaticResource TooltipModifierTemplate}"
                                                                            ZoomExtentsModifierTemplate="{StaticResource ZoomExtentsModifierTemplate}"
                                                                            ZoomPanModifierTemplate="{StaticResource ZoomPanModifierModifierTemplate}" />
                                </ItemsControl.ItemTemplateSelector>

                            </ItemsControl>
                            
                        </WrapPanel>

                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style BasedOn="{StaticResource SciChartExampleToolbarStyle}" TargetType="toolbar:SciChartInteractionToolbar" />

</ResourceDictionary>